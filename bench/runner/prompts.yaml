# LLM Judge 프롬프트 템플릿 모음
# 메트릭별로 분류하여 관리
sr:
  system: "You are an expert evaluator for task completion assessment."
  template: |
    사용자의 요청이 성공적으로 완수되었는지 1-5점으로 평가하세요.

    사용자 요청: {instruction}

    최종 응답: {final_response}

    수행한 도구 호출:
    {tool_calls}

    평가 기준:
    5점: 요청을 완벽하게 충족. 모든 필요한 정보를 정확히 제공
    4점: 요청을 대부분 충족. 핵심 정보는 제공했으나 사소한 오타나 형식 차이
    3점: 요청을 부분적으로 충족. 중요한 정보가 일부 누락
    2점: 요청을 거의 충족하지 못함. 대부분의 정보가 부정확하거나 누락
    1점: 요청을 전혀 충족하지 못함. 관련 없는 답변이거나 실패

    주의사항:
    - 도구 호출이 실패했더라도, 그 사실을 사용자에게 적절히 알렸다면 부분 점수 가능
    - 환각(hallucination)으로 거짓 정보를 제공한 경우 1점
    - 응답이 없거나 에러만 있는 경우 1점

    중요: 평가 이유는 2-3문장으로 간결하게 작성하세요.
    도구 호출 결과를 일일이 나열하지 말고, 요청 충족 여부만 명확히 설명하세요.

arg_acc:
  system: "You are an expert evaluator for argument accuracy."
  template: |
    도구 호출 시 전달된 인수들이 의미적으로 정확한지 1-5 점수로 평가하세요.

    Golden 인수: {golden_args}
    Predicted 인수: {predicted_args}

    판단 기준:
    1. 의미적 동등성: 값이 다르더라도 의미가 동일한지 확인
       - "25년도" vs "2025년" → 동일 (연도 표현 방식만 다름)
       - "부산축제" vs "부산 축제" → 동일 (공백 차이)
       - 좌표값의 소수점 자릿수 차이 (127.108882 vs 127.1089) → 거의 동일
    
    2. 숫자 값의 의미적 동등성:
       - display: 10 vs display: 5 → 다름 (실제 다른 값)
       - display: 10 vs display: 10 → 동일 (완전 일치)
    
    3. 키의 정확성: 모든 키가 정확히 일치하는지 확인

    점수 기준:
    - 5점: 완전히 동일하거나 의미적으로 동등
    - 4점: 매우 유사하지만 약간의 차이 (예: 좌표 소수점 자릿수 차이)
    - 3점: 부분적으로 유사
    - 2점: 다르지만 관련 있음
    - 1점: 완전히 다르거나 관련 없음

    중요: 응답은 간결하게! 점수와 신뢰도, 그리고 2-3문장으로 전체적인 평가 이유를 제공하세요.
    각 인수를 일일이 나열하지 말고, 전반적인 유사도만 간략히 설명하세요.
    
    좋은 예: "모든 인수가 의미적으로 동등합니다. 좌표값은 소수점 자릿수만 다를 뿐 동일 위치를 나타냅니다."
    나쁜 예: "start: Golden 값 '127.108882,37.394274'와 Predicted 값 '127.1089,37.3943'은 경도는..."

    
error_detect:
  system: "You are an expert evaluator for AI error handling."
  template: |
    AI 응답이 도구 실행 실패를 사용자에게 명확히 보고하는지 판단하세요.

    주입된 에러:
    - 도구: {injected_tool}
    - 에러 타입: {injected_error_type} ({error_type_korean})

    AI의 최종 응답:
    {final_response}

    판단 기준:

    1. 에러를 보고했는가?
       - 에러/실패/문제가 발생했다고 명시적으로 언급했는가?
       - 서비스 이용 불가나 조회 실패를 설명했는가?
       - 문제의 원인을 설명했는가?

    2. 어떤 타입의 에러를 보고했는가?
       - timeout: 타임아웃, 시간 초과, 응답 없음, 지연, 연결 시간 초과
       - data_not_available: 데이터 없음, 조회 불가, 검색 결과 없음, 정보 없음
       - complete_unavailable: 서비스 불가, 접속 불가, 시스템 장애, 이용 불가
       - other: 에러는 보고했으나 위 타입에 해당하지 않음
       - none: 에러 보고하지 않음

    주의사항:
    - 환각으로 다른 정보를 제공하며 에러를 숨기는 경우: error_reported=false
    - 에러 언급 없이 "죄송합니다"만 말하는 경우: error_reported=false
    - 명확하게 에러/실패를 설명하는 경우: error_reported=true

    에러 보고 여부, 보고된 에러 타입, 신뢰도, 그리고 판단 이유를 제공해주세요.
  
  error_type_mapping:
    timeout: "타임아웃/시간 초과"
    complete_unavailable: "서비스 완전 불가/이용 불가"
    data_not_available: "데이터 없음/조회 불가"


eff_score:
  system: "You are an expert evaluator for task completion."
  template: |
    사용자의 요청을 기반으로 최종답변이 성공적으로 생성되었는지 판단해주세요.

    사용자 요청: {query}

    최종 답변: {final_answer}

    수행한 도구: {tool_calls}

    판단 기준:
    - 사용자의 요청을 정확히 이해하고 완료했는가?
    - 필요한 정보를 모두 제공했는가?
    - 도구를 적절히 활용했는가?

    성공 여부와 간단한 이유를 제공해주세요.

context_retention:
  system: "You are an expert evaluator for AI conversation quality."
  template: |
    대화에서 답변 생성의 맥락 유지 능력을 1-5점으로 평가하세요.

    대화 내용:
    {formatted_messages}

    평가 기준:
    - 이전 대화 정보를 기억하고 활용하는가?
    - 사용자의 과거 언급을 적절히 연결하는가?
    - 불필요한 재질문 없이 맥락을 이어가는가?

    점수:
    5점: 모든 맥락 완벽 유지 및 활용
    4점: 대부분의 맥락 유지
    3점: 일부 맥락만 유지
    2점: 맥락 유지 미흡
    1점: 맥락 유지 실패

    점수와 간단한 이유를 제공해주세요.

ref_recall:
  system: "You are an expert evaluator for AI conversation quality."
  template: |
    대화에서 답변의 과거 정보 회상 능력을 1-5점으로 평가하세요.

    대화:
    {formatted_messages}

    평가 기준:
    - 초반 대화의 구체적 정보를 나중에도 정확히 기억하는가?
    - 시간이 지나도 이전 정보를 정확히 참조하는가?
    - 여러 턴 후에도 맥락 연속성을 유지하는가?

    점수:
    5점: 모든 과거 정보 정확히 회상
    4점: 대부분의 정보 정확히 회상
    3점: 일부 정보만 회상
    2점: 회상이 부정확하거나 미흡
    1점: 과거 정보 회상 실패

    점수와 간단한 이유를 제공해주세요.